<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Sahabat Alam</title>
<link rel="stylesheet" href="../css/tunarunguquest2.css" />
<link rel="icon" href="../assets/SahabatAlam.png" type="image/png" />
</head>
<body>
<div id="mainWrapper">

  <!-- Intro Overlay -->
  <div id="introOverlay" class="overlay" role="dialog" aria-modal="true" aria-labelledby="introTitle" aria-describedby="introDesc">
    <h2 id="introTitle">Selamat Datang di Quest Pohon!</h2>
    <p id="introDesc">
      Pohonmu mulai tumbuh, tetapi banyak serangga hama yang mengganggu perkembangannya.<br>
      Gunakan metode alami untuk melindungi pohonmu dan biarkan ia tumbuh dengan sehat!
    </p>
    <button id="showHowToBtn" class="primary-button" aria-label="Lihat Cara Bermain">Baca Cara Bermain</button>
  </div>

  <!-- Cara Bermain Overlay -->
  <div id="howToPlayOverlay" class="overlay">
    <div class="howto-content">
      <h2>Cara Bermain Quest Pohon 🌳</h2>
      <ol>
        <li>Pilih alat pengendalian hama alami di panel bawah: Laba-laba 🕷️, Burung 🐦, Perangkap Daun 🍃, atau Bunga 🌸.</li>
        <li>Setiap hama memiliki alat pengendali yang tepat - perhatikan petunjuk di samping mereka.</li>
        <li>Klik pada serangga hama yang mendekati pohon untuk mengusirnya menggunakan alat yang dipilih.</li>
        <li>Berhati-hatilah! Jangan usir kupu-kupu 🦋 karena mereka membantu ekosistem.</li>
        <li>Pohonmu akan bertumbuh lebih besar seiring bertambahnya skor.</li>
        <li>Setiap hama yang mencapai pohon akan mengurangi kesehatannya.</li>
        <li>Lindungi pohonmu selama 25 detik untuk menyelesaikan misi!</li>
      </ol>
      <div class="howto-tips">
        <b>Tips untuk sukses:</b>
        <ul>
          <li>Tangkap hama berturut-turut dengan alat yang tepat untuk mendapatkan bonus combo.</li>
          <li>Perhatikan power-up yang muncul selama permainan untuk bantuan ekstra.</li>
          <li>Jika kesehatan pohon mencapai nol, permainan akan berakhir.</li>
        </ul>
      </div>
      <button id="startGameBtn" class="primary-button">Mulai Petualangan</button>
    </div>
  </div>

  <div id="gameContainer" aria-live="polite" aria-atomic="true">
    <div id="header">
      <div id="scoreBoard">Skor: <span id="score">0</span></div>
      <div id="timerCircle" aria-live="assertive" aria-atomic="true">25</div>
    </div>
    
    <!-- Pause button -->
    <button id="pauseBtn" aria-label="Jeda Permainan">⏸️</button>
    
    <!-- Power-up container -->
    <div id="powerupContainer">
      <div class="powerup" id="slowTime" data-tooltip="Perlambat Waktu (5 detik)">⏱️</div>
      <div class="powerup" id="freezeBugs" data-tooltip="Bekukan Hama (3 detik)">❄️</div>
      <div class="powerup" id="healthBoost" data-tooltip="+20% Kesehatan Pohon">❤️</div>
    </div>
    
    <!-- Combo indicator -->
    <div id="combo-indicator">Combo x<span id="combo-count">2</span>!</div>
    
    <div id="treeArea" aria-label="Area pohon dan serangga hama">
      <div id="healthBarContainer">
        <div id="healthBar" style="width:100%"></div>
        <span id="healthBarText">100%</span>
      </div>
      <img id="tree" class="stage-1" src="https://api.iconify.design/noto-v1:deciduous-tree.svg?size=240" alt="Pohon Kecil" />
      <div id="grassElements"></div>
      <div id="bugArea"></div>
      <div id="avatarPakBurung" title="Avatar Pak Burung isyarat">🦜</div>
      <div id="messageBox" role="alert" aria-live="assertive"></div>
    </div>

    <nav id="toolsPanel" aria-label="Alat Pelindung Pohon">
      <button class="tool" data-tool="spider" title="Laba-laba" role="button" tabindex="0" aria-pressed="false">🕷️</button>
      <button class="tool" data-tool="bird" title="Burung Pemakan Serangga" role="button" tabindex="0" aria-pressed="false">🐦</button>
      <button class="tool" data-tool="stickyTrap" title="Perangkap Daun Lengket" role="button" tabindex="0" aria-pressed="false">🍃</button>
      <button class="tool" data-tool="flower" title="Bunga Pengusir Hama" role="button" tabindex="0" aria-pressed="false">🌸</button>
    </nav>

    <div id="eduBox" aria-live="polite" aria-atomic="true">
      <b>Tips Hari Ini:</b> Pelihara laba-laba di kebunmu karena mereka adalah predator alami bagi banyak hama tanaman.
    </div>
  </div>

  <!-- Pause Menu -->
  <div id="pauseMenu">
    <div id="pauseMenuContent">
      <h2>Permainan Dijeda</h2>
      <p>Kamu bisa melanjutkan permainan atau melihat tutorial kembali.</p>
      <button id="resumeBtn" class="pause-menu-btn">Lanjutkan</button>
      <button id="restartBtn" class="pause-menu-btn">Mulai Ulang</button>
      <button id="howToPlayBtn" class="pause-menu-btn">Lihat Tutorial</button>
    </div>
  </div>

  <!-- Overlay pohon mati -->
  <div id="treeDeadOverlay">
    <div id="treeDeadContent">
      <h2>Pohonmu Tidak Bertahan 😢</h2>
      <p>Sayang sekali, pohonmu tidak mampu bertahan dari serangan hama yang terlalu banyak. Ingat untuk menggunakan alat yang tepat untuk setiap jenis hama!</p>
      <button id="retryBtn" class="primary-button">Coba Lagi</button>
    </div>
  </div>

  <!-- Game Over Overlay -->
  <div id="gameOverOverlay" role="dialog" aria-modal="true" aria-labelledby="gameOverTitle">
    <div id="gameOverContent">
      <h2 id="gameOverTitle">Misi Berhasil!</h2>
      
      <div id="finalStats">
        <p>Skor Akhir: <span id="finalScoreText" class="highlight">0</span></p>
        <p>Hama Dibasmi: <span id="bugsDefeatedText" class="highlight">0</span></p>
        <p>Combo Terbesar: <span id="maxComboText" class="highlight">0</span></p>
        <p>Kesehatan Pohon: <span id="finalHealthText" class="highlight">0%</span></p>
      </div>
      
      <p id="achievementText" style="font-weight:600;color:var(--primary);margin-bottom:25px;">Penghargaan Diperoleh: Pembela Pohon!</p>
      
      <button id="nextMissionBtn" class="primary-button" aria-label="Lanjut ke Misi Berikutnya">Lanjut ke Misi Berikutnya</button>
    <div id="fadeTransition"></div>

    </div>
  </div>
</div>

<div id="fadeTransition"></div>

<script src="../js/tunarunguquest2.js"></script>

</script>
</body>
</html>